{"ast":null,"code":"import _objectSpread from \"/Users/Ksquare/Documents/Software/home/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { useContext, useRef, useInsertionEffect } from 'react';\nimport { isMotionValue } from './utils/is-motion-value.mjs';\nimport { useMotionValue } from './use-motion-value.mjs';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\nimport { animateValue } from '../animation/animators/MainThreadAnimation.mjs';\nimport { frame, frameData } from '../frameloop/frame.mjs';\nfunction toNumber(v) {\n  if (typeof v === \"number\") return v;\n  return parseFloat(v);\n}\n/**\n * Creates a `MotionValue` that, when `set`, will use a spring animation to animate to its new state.\n *\n * It can either work as a stand-alone `MotionValue` by initialising it with a value, or as a subscriber\n * to another `MotionValue`.\n *\n * @remarks\n *\n * ```jsx\n * const x = useSpring(0, { stiffness: 300 })\n * const y = useSpring(x, { damping: 10 })\n * ```\n *\n * @param inputValue - `MotionValue` or number. If provided a `MotionValue`, when the input `MotionValue` changes, the created `MotionValue` will spring towards that value.\n * @param springConfig - Configuration options for the spring.\n * @returns `MotionValue`\n *\n * @public\n */\nfunction useSpring(source) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var _useContext = useContext(MotionConfigContext),\n    isStatic = _useContext.isStatic;\n  var activeSpringAnimation = useRef(null);\n  var value = useMotionValue(isMotionValue(source) ? toNumber(source.get()) : source);\n  var latestValue = useRef(value.get());\n  var latestSetter = useRef(function () {});\n  var startAnimation = function startAnimation() {\n    /**\n     * If the previous animation hasn't had the chance to even render a frame, render it now.\n     */\n    var animation = activeSpringAnimation.current;\n    if (animation && animation.time === 0) {\n      animation.sample(frameData.delta);\n    }\n    stopAnimation();\n    activeSpringAnimation.current = animateValue(_objectSpread(_objectSpread({\n      keyframes: [value.get(), latestValue.current],\n      velocity: value.getVelocity(),\n      type: \"spring\",\n      restDelta: 0.001,\n      restSpeed: 0.01\n    }, config), {}, {\n      onUpdate: latestSetter.current\n    }));\n  };\n  var stopAnimation = function stopAnimation() {\n    if (activeSpringAnimation.current) {\n      activeSpringAnimation.current.stop();\n    }\n  };\n  useInsertionEffect(function () {\n    return value.attach(function (v, set) {\n      /**\n       * A more hollistic approach to this might be to use isStatic to fix VisualElement animations\n       * at that level, but this will work for now\n       */\n      if (isStatic) return set(v);\n      latestValue.current = v;\n      latestSetter.current = set;\n      frame.update(startAnimation);\n      return value.get();\n    }, stopAnimation);\n  }, [JSON.stringify(config)]);\n  useIsomorphicLayoutEffect(function () {\n    if (isMotionValue(source)) {\n      return source.on(\"change\", function (v) {\n        return value.set(toNumber(v));\n      });\n    }\n  }, [value]);\n  return value;\n}\nexport { useSpring };","map":{"version":3,"names":["useContext","useRef","useInsertionEffect","isMotionValue","useMotionValue","MotionConfigContext","useIsomorphicLayoutEffect","animateValue","frame","frameData","toNumber","v","parseFloat","useSpring","source","config","arguments","length","undefined","_useContext","isStatic","activeSpringAnimation","value","get","latestValue","latestSetter","startAnimation","animation","current","time","sample","delta","stopAnimation","_objectSpread","keyframes","velocity","getVelocity","type","restDelta","restSpeed","onUpdate","stop","attach","set","update","JSON","stringify","on"],"sources":["/Users/Ksquare/Documents/Software/home/node_modules/framer-motion/dist/es/value/use-spring.mjs"],"sourcesContent":["import { useContext, useRef, useInsertionEffect } from 'react';\nimport { isMotionValue } from './utils/is-motion-value.mjs';\nimport { useMotionValue } from './use-motion-value.mjs';\nimport { MotionConfigContext } from '../context/MotionConfigContext.mjs';\nimport { useIsomorphicLayoutEffect } from '../utils/use-isomorphic-effect.mjs';\nimport { animateValue } from '../animation/animators/MainThreadAnimation.mjs';\nimport { frame, frameData } from '../frameloop/frame.mjs';\n\nfunction toNumber(v) {\n    if (typeof v === \"number\")\n        return v;\n    return parseFloat(v);\n}\n/**\n * Creates a `MotionValue` that, when `set`, will use a spring animation to animate to its new state.\n *\n * It can either work as a stand-alone `MotionValue` by initialising it with a value, or as a subscriber\n * to another `MotionValue`.\n *\n * @remarks\n *\n * ```jsx\n * const x = useSpring(0, { stiffness: 300 })\n * const y = useSpring(x, { damping: 10 })\n * ```\n *\n * @param inputValue - `MotionValue` or number. If provided a `MotionValue`, when the input `MotionValue` changes, the created `MotionValue` will spring towards that value.\n * @param springConfig - Configuration options for the spring.\n * @returns `MotionValue`\n *\n * @public\n */\nfunction useSpring(source, config = {}) {\n    const { isStatic } = useContext(MotionConfigContext);\n    const activeSpringAnimation = useRef(null);\n    const value = useMotionValue(isMotionValue(source) ? toNumber(source.get()) : source);\n    const latestValue = useRef(value.get());\n    const latestSetter = useRef(() => { });\n    const startAnimation = () => {\n        /**\n         * If the previous animation hasn't had the chance to even render a frame, render it now.\n         */\n        const animation = activeSpringAnimation.current;\n        if (animation && animation.time === 0) {\n            animation.sample(frameData.delta);\n        }\n        stopAnimation();\n        activeSpringAnimation.current = animateValue({\n            keyframes: [value.get(), latestValue.current],\n            velocity: value.getVelocity(),\n            type: \"spring\",\n            restDelta: 0.001,\n            restSpeed: 0.01,\n            ...config,\n            onUpdate: latestSetter.current,\n        });\n    };\n    const stopAnimation = () => {\n        if (activeSpringAnimation.current) {\n            activeSpringAnimation.current.stop();\n        }\n    };\n    useInsertionEffect(() => {\n        return value.attach((v, set) => {\n            /**\n             * A more hollistic approach to this might be to use isStatic to fix VisualElement animations\n             * at that level, but this will work for now\n             */\n            if (isStatic)\n                return set(v);\n            latestValue.current = v;\n            latestSetter.current = set;\n            frame.update(startAnimation);\n            return value.get();\n        }, stopAnimation);\n    }, [JSON.stringify(config)]);\n    useIsomorphicLayoutEffect(() => {\n        if (isMotionValue(source)) {\n            return source.on(\"change\", (v) => value.set(toNumber(v)));\n        }\n    }, [value]);\n    return value;\n}\n\nexport { useSpring };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}